<!-- 文件路径：admin.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>后台管理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入 Quill CSS -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <style> 
        .active-nav { background-color: #1e293b; border-left: 4px solid #3b82f6; color: white !important; } 
        
        /* --- 编辑器 UI 优化 (固定高度+滚动) --- */
        /* 工具栏吸顶 */
        .ql-toolbar {
            position: sticky;
            top: 0;
            z-index: 20; 
            background-color: white;
            border-bottom: 1px solid #e5e7eb !important;
        }

        /* 通用编辑器容器样式 (新闻 & 活动) */
        #act-editor-container, #editor-container {
            height: 600px !important; 
            display: flex;
            flex-direction: column;
            background-color: white;
            border: 1px solid #d1d5db;
        }

        /* 编辑器内部滚动条 */
        .ql-editor {
            height: 100%;
            overflow-y: auto;
            font-size: 16px;
            font-family: "Microsoft YaHei", sans-serif;
            padding: 20px;
        }
        
        /* 优化编辑器内图片显示 */
        .ql-editor img { max-width: 100%; height: auto; }

        /* --- Quill 汉化与字体定制 (WPS 风格) --- */
        /* 字体映射 */
        .ql-font-simsun { font-family: "SimSun"; }
        .ql-font-simhei { font-family: "SimHei"; }
        .ql-font-kaiti { font-family: "KaiTi"; }
        .ql-font-fangsong { font-family: "FangSong"; }
        .ql-font-microsoft-yahei { font-family: "Microsoft YaHei"; }

        /* 工具栏下拉菜单汉化 - 字体 */
        .ql-snow .ql-picker.ql-font .ql-picker-label[data-value="simsun"]::before,
        .ql-snow .ql-picker.ql-font .ql-picker-item[data-value="simsun"]::before { content: "宋体"; font-family: "SimSun"; }

        .ql-snow .ql-picker.ql-font .ql-picker-label[data-value="simhei"]::before,
        .ql-snow .ql-picker.ql-font .ql-picker-item[data-value="simhei"]::before { content: "黑体"; font-family: "SimHei"; }

        .ql-snow .ql-picker.ql-font .ql-picker-label[data-value="microsoft-yahei"]::before,
        .ql-snow .ql-picker.ql-font .ql-picker-item[data-value="microsoft-yahei"]::before { content: "微软雅黑"; font-family: "Microsoft YaHei"; }

        .ql-snow .ql-picker.ql-font .ql-picker-label[data-value="kaiti"]::before,
        .ql-snow .ql-picker.ql-font .ql-picker-item[data-value="kaiti"]::before { content: "楷体"; font-family: "KaiTi"; }

        .ql-snow .ql-picker.ql-font .ql-picker-label[data-value="fangsong"]::before,
        .ql-snow .ql-picker.ql-font .ql-picker-item[data-value="fangsong"]::before { content: "仿宋"; font-family: "FangSong"; }

        /* 工具栏下拉菜单汉化 - 字号 */
        .ql-snow .ql-picker.ql-size .ql-picker-label[data-value="12px"]::before,
        .ql-snow .ql-picker.ql-size .ql-picker-item[data-value="12px"]::before { content: "小四 (12px)"; }
        .ql-snow .ql-picker.ql-size .ql-picker-label[data-value="14px"]::before,
        .ql-snow .ql-picker.ql-size .ql-picker-item[data-value="14px"]::before { content: "四号 (14px)"; }
        .ql-snow .ql-picker.ql-size .ql-picker-label[data-value="16px"]::before,
        .ql-snow .ql-picker.ql-size .ql-picker-item[data-value="16px"]::before { content: "三号 (16px) - 默认"; }
        .ql-snow .ql-picker.ql-size .ql-picker-label[data-value="18px"]::before,
        .ql-snow .ql-picker.ql-size .ql-picker-item[data-value="18px"]::before { content: "小二 (18px)"; }
        .ql-snow .ql-picker.ql-size .ql-picker-label[data-value="20px"]::before,
        .ql-snow .ql-picker.ql-size .ql-picker-item[data-value="20px"]::before { content: "二号 (20px)"; }
        .ql-snow .ql-picker.ql-size .ql-picker-label[data-value="24px"]::before,
        .ql-snow .ql-picker.ql-size .ql-picker-item[data-value="24px"]::before { content: "小一 (24px)"; }
        .ql-snow .ql-picker.ql-size .ql-picker-label[data-value="30px"]::before,
        .ql-snow .ql-picker.ql-size .ql-picker-item[data-value="30px"]::before { content: "一号 (30px)"; }
    </style>
</head>
<body class="bg-gray-100 h-screen flex overflow-hidden font-sans text-gray-800">

    <!-- 登录弹窗 -->
    <div id="login-modal" class="fixed inset-0 bg-[#001540] z-50 flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg shadow-2xl w-96 text-center">
            <h2 class="text-2xl font-bold mb-6">管理员登录</h2>
            <form id="loginForm" class="space-y-4">
                <input type="email" id="email" placeholder="邮箱" class="w-full border p-3 rounded" required>
                <input type="password" id="password" placeholder="密码" class="w-full border p-3 rounded" required>
                <button type="submit" id="loginBtn" class="w-full bg-[#004098] text-white py-3 rounded font-bold">登录</button>
            </form>
            <p id="loginError" class="text-red-500 text-xs mt-4 hidden"></p>
            <div class="mt-6 pt-4 border-t"><a href="index.html" class="text-sm text-gray-500 hover:text-blue-600">← 返回首页</a></div>
        </div>
    </div>

    <!-- 侧边栏 -->
    <aside class="w-64 bg-[#001540] text-gray-300 flex-col hidden shadow-xl z-20" id="sidebar">
        <div class="p-6 border-b border-white/10 text-center"><h1 class="font-bold text-xl text-white">网站后台管理</h1><p class="text-xs mt-1" id="currentUser">admin</p></div>
        <nav class="flex-1 mt-6">
            <button onclick="switchTab('news')" id="nav-news" class="w-full text-left px-6 py-4 active-nav transition"><i class="fa-solid fa-newspaper w-6"></i> 新闻发布</button>
            <button onclick="switchTab('activity')" id="nav-activity" class="w-full text-left px-6 py-4 transition hover:bg-white/5"><i class="fa-solid fa-calendar-check w-6"></i> 行业活动</button>
            <button onclick="switchTab('project')" id="nav-project" class="w-full text-left px-6 py-4 transition hover:bg-white/5"><i class="fa-solid fa-flask w-6"></i> 课题研究</button>
            <button onclick="switchTab('standard')" id="nav-standard" class="w-full text-left px-6 py-4 transition hover:bg-white/5"><i class="fa-solid fa-file-alt w-6"></i> 标准研制</button>
        </nav>
        <div class="p-4"><button id="logoutBtn" class="w-full py-2 border border-white/20 rounded hover:bg-white/10">退出登录</button></div>
    </aside>

    <!-- 主内容 -->
    <main class="flex-1 bg-gray-50 overflow-y-auto p-8 hidden" id="main-content">
        
        <!-- ================= 新闻模块 ================= -->
        <section id="section-news" class="max-w-5xl mx-auto">
            <h2 class="text-2xl font-bold mb-6 border-l-4 border-blue-800 pl-4">新闻管理</h2>
            <div class="bg-white p-6 rounded shadow mb-8">
                <div class="flex justify-between mb-4"><h3 class="font-bold text-lg" id="newsFormTitle">发布新闻</h3><span id="newsDraftTip" class="text-xs text-green-600 hidden">草稿已存</span></div>
                <form id="newsForm" class="space-y-4">
                    <input type="hidden" id="newsId">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <input type="text" id="newsTitle" placeholder="标题" class="md:col-span-2 border p-2 rounded" required>
                        <select id="newsCategory" class="border p-2 rounded">
                            <option value="news">新闻</option>
                            <option value="notice">公告</option>
                        </select>
                        <input type="text" id="newsSource" placeholder="来源" class="border p-2 rounded">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="date" id="newsPublishDate" class="border p-2 rounded">
                        <input type="text" id="newsAuthor" placeholder="作者" class="border p-2 rounded">
                    </div>
                    <textarea id="newsSummary" placeholder="摘要" class="w-full border p-2 rounded h-20"></textarea>
                    
                    <!-- 新闻封面图 (支持 URL 优先) -->
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">封面图片</label>
                        <!-- URL 输入框 -->
                        <input type="text" id="newsCoverUrl" placeholder="图片链接 (https://...)，与下方“选择文件”二选一即可" class="w-full border p-2 rounded text-sm mb-2 bg-gray-50 focus:bg-white transition" title="如有链接，优先使用此链接">
                        
                        <div class="flex items-center gap-4">
                            <!-- 文件上传 -->
                            <input type="file" id="newsCover" accept="image/*" class="text-sm flex-1" onchange="previewImage(this, 'newsCoverPreview')">
                            <!-- 预览图容器 -->
                            <div id="newsCoverPreviewBox" class="hidden h-16 w-24 border rounded overflow-hidden bg-gray-100 relative group">
                                <img id="newsCoverPreview" src="" class="w-full h-full object-cover">
                                <a href="#" target="_blank" id="newsCoverLink" class="absolute inset-0 flex items-center justify-center bg-black/50 text-white opacity-0 group-hover:opacity-100 text-xs transition">查看</a>
                            </div>
                        </div>
                        <p class="text-xs text-gray-400 mt-1">提示：若“图片链接”框内有值，将忽略文件上传。</p>
                    </div>

                    <!-- 新闻正文编辑器 (升级为 WPS 风格) -->
                    <div class="mt-4">
                        <div class="flex justify-between items-end mb-2">
                            <label class="block text-sm font-bold text-gray-700">新闻正文</label>
                            <!-- 一键排版按钮 -->
                            <button type="button" onclick="formatContentImages('news')" class="text-xs bg-blue-100 text-blue-700 px-3 py-1.5 rounded hover:bg-blue-200 transition flex items-center shadow-sm">
                                <i class="fa-solid fa-images mr-1.5"></i> 一键统一图片宽度(100%)
                            </button>
                        </div>
                        <div id="editor-container"></div>
                    </div>

                    <div class="flex gap-4 pt-4">
                        <button type="submit" class="bg-[#004098] text-white px-6 py-2 rounded">提交</button>
                        <button type="button" onclick="cancelEdit('news')" id="newsCancelBtn" class="bg-gray-300 px-6 py-2 rounded hidden">撤销</button>
                    </div>
                </form>
            </div>
            <div class="bg-white p-6 rounded shadow">
                <div class="flex justify-between mb-4"><h3 class="font-bold">列表</h3><input type="text" id="searchNews" placeholder="搜索..." class="border rounded px-3 py-1 text-sm"></div>
                <ul id="newsList" class="space-y-2"></ul>
            </div>
        </section>

        <!-- ================= 活动模块 ================= -->
        <section id="section-activity" class="hidden max-w-5xl mx-auto">
            <h2 class="text-2xl font-bold mb-6 border-l-4 border-yellow-500 pl-4">活动管理</h2>
            <div class="bg-white p-6 rounded shadow mb-8 border-t-4 border-yellow-500">
                <div class="flex justify-between mb-4"><h3 class="font-bold text-lg" id="actFormTitle">新增/编辑 活动</h3><span id="actDraftTip" class="text-xs text-green-600 hidden">草稿已存</span></div>
                
                <form id="actForm" class="grid grid-cols-2 gap-4">
                    <input type="hidden" id="actId">
                    
                    <input type="text" id="actTitle" placeholder="活动名称" class="col-span-1 border p-2 rounded" required>
                    
                    <input type="text" id="actCategory" list="actCategoryList" placeholder="赛事类型 (可手输或选择)" class="col-span-1 border p-2 rounded bg-white">
                    <datalist id="actCategoryList">
                        <option value="全国新能源汽车动力电池安全预警算法大赛"></option>
                        <option value='中国青年科技创新揭榜挂帅擂台赛'></option>
                    </datalist>

                    <input type="text" id="actDate" placeholder="展示时间 (如: 2024年10月-12月)" class="border p-2 rounded">
                    <input type="text" id="actLoc" placeholder="地点" class="border p-2 rounded">
                    
                    <textarea id="actSummary" placeholder="列表页简介 (简短描述)" class="col-span-2 border p-2 rounded h-20"></textarea>

                    <div class="col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4 bg-gray-50 p-4 rounded border border-gray-200">
                        <div class="col-span-1">
                            <label class="block text-xs font-bold text-gray-500 mb-1">主办单位</label>
                            <input type="text" id="actOrganizer" placeholder="默认: 国家市场监督管理总局技术创新中心..." class="w-full border p-2 rounded text-sm bg-white">
                        </div>
                        <div class="col-span-1">
                            <label class="block text-xs font-bold text-gray-500 mb-1">承办单位</label>
                            <input type="text" id="actContractor" placeholder="默认: 北京中汽院科技有限公司" class="w-full border p-2 rounded text-sm bg-white">
                        </div>
                        <div class="col-span-1">
                            <label class="block text-xs font-bold text-gray-500 mb-1">联系方式</label>
                            <input type="text" id="actContact" placeholder="邮箱或电话" class="w-full border p-2 rounded text-sm bg-white">
                        </div>
                    </div>

                    <!-- 活动封面图片 (支持 URL 优先) -->
                    <div class="col-span-1">
                        <label class="block text-xs text-gray-500 mb-1">封面图片</label>
                        <!-- URL 输入框 -->
                        <input type="text" id="actImgUrl" placeholder="图片链接，与下方“选择文件”二选一即可" class="w-full border p-2 rounded text-sm mb-2 bg-gray-50" title="优先使用此链接">
                        <div class="flex items-center gap-2">
                            <!-- 文件上传 -->
                            <input type="file" id="actImg" accept="image/*" class="text-sm w-full" onchange="previewImage(this, 'actImgPreview')">
                            <!-- 预览 -->
                            <div id="actImgPreviewBox" class="hidden h-10 w-16 border rounded overflow-hidden flex-shrink-0">
                                <img id="actImgPreview" src="" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </div>

                    <!-- 活动附件文档 (支持 URL 优先) -->
                    <div class="col-span-1">
                        <label class="block text-xs text-gray-500 mb-1">附件文档 (规则/名单PDF)</label>
                        <!-- URL 输入框 -->
                        <input type="text" id="actFileUrl" placeholder="文档链接" class="w-full border p-2 rounded text-sm mb-2 bg-gray-50" title="优先使用此链接">
                        <div class="flex items-center gap-2">
                            <!-- 文件上传 -->
                            <input type="file" id="actFile" accept=".pdf,.doc,.docx" class="text-sm w-full">
                            <!-- 预览链接 -->
                            <a id="actFilePreviewLink" href="#" target="_blank" class="hidden text-blue-600 hover:text-blue-800 text-sm font-bold px-2 whitespace-nowrap">
                                <i class="fa-solid fa-file-arrow-down"></i> 查看
                            </a>
                        </div>
                    </div>

                    <!-- 时间线编辑区域 -->
                    <div class="col-span-2 bg-gray-50 p-4 rounded border border-gray-200">
                        <div class="flex justify-between items-center mb-2">
                            <label class="font-bold text-sm text-gray-700">比赛时间线 (Timeline)</label>
                            <button type="button" onclick="addTimelineRow()" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition">+ 添加节点</button>
                        </div>
                        <div id="timeline-container" class="space-y-2">
                            <!-- JS 动态插入节点 -->
                        </div>
                        <p class="text-xs text-gray-400 mt-2">提示：请按时间先后顺序添加，保存后将显示在前端列表页。</p>
                    </div>

                    <!-- 活动详情编辑器 (WPS 风格 + 固定高度) -->
                    <div class="col-span-2 mt-4">
                        <div class="flex justify-between items-end mb-2">
                            <label class="block text-sm font-bold text-gray-700">活动详情 / 赛后回顾</label>
                            <!-- 一键排版按钮 -->
                            <button type="button" onclick="formatContentImages('act')" class="text-xs bg-blue-100 text-blue-700 px-3 py-1.5 rounded hover:bg-blue-200 transition flex items-center shadow-sm">
                                <i class="fa-solid fa-images mr-1.5"></i> 一键统一图片宽度(100%)
                            </button>
                        </div>
                        <!-- 高度由 CSS #act-editor-container 控制 -->
                        <div id="act-editor-container"></div>
                    </div>

                    <div class="col-span-2 flex gap-4 mt-6">
                        <button type="submit" class="bg-yellow-600 text-white px-6 py-2 rounded hover:bg-yellow-700 transition shadow-md">提交发布</button>
                        <button type="button" onclick="cancelEdit('act')" id="actCancelBtn" class="bg-gray-300 px-6 py-2 rounded hidden hover:bg-gray-400 transition">撤销</button>
                    </div>
                </form>
            </div>
            <div class="bg-white p-6 rounded shadow">
                <div class="flex justify-between mb-4"><h3 class="font-bold">活动列表</h3><input type="text" id="searchAct" placeholder="搜索..." class="border rounded px-3 py-1 text-sm"></div>
                <ul id="actList" class="space-y-2"></ul>
            </div>
        </section>

        <!-- ================= 课题模块 ================= -->
        <section id="section-project" class="hidden max-w-5xl mx-auto">
            <h2 class="text-2xl font-bold mb-6 border-l-4 border-green-500 pl-4">课题管理</h2>
            <div class="bg-white p-6 rounded shadow mb-8 border-t-4 border-green-500">
                <div class="flex justify-between mb-4"><h3 class="font-bold text-lg" id="projFormTitle">新增课题</h3><span id="projDraftTip" class="text-xs text-green-600 hidden">草稿已存</span></div>
                <form id="projForm" class="grid grid-cols-3 gap-4">
                    <input type="hidden" id="projId">
                    <input type="text" id="projName" placeholder="课题名称" class="col-span-2 border p-2 rounded" required>
                    
                    <input type="text" id="projType" list="projTypeList" placeholder="课题类型 (可手输)" class="border p-2 rounded">
                    <datalist id="projTypeList">
                        <option value="国家重点"></option>
                        <option value="总局科技"></option>
                        <option value="企业横向"></option>
                    </datalist>

                    <input type="text" id="projStage" list="projStageList" placeholder="课题状态 (可手输)" class="border p-2 rounded">
                    <datalist id="projStageList">
                        <option value="进行中"></option>
                        <option value="验收阶段"></option>
                        <option value="已完成"></option>
                    </datalist>

                    <input type="text" id="projRole" placeholder="承担角色" class="col-span-2 border p-2 rounded">
                    <textarea id="projContent" placeholder="研究内容" class="col-span-3 border p-2 rounded h-20"></textarea>
                    <div class="col-span-3 flex gap-4"><button type="submit" class="bg-green-600 text-white px-6 py-2 rounded">提交</button><button type="button" onclick="cancelEdit('proj')" id="projCancelBtn" class="bg-gray-300 px-6 py-2 rounded hidden">撤销</button></div>
                </form>
            </div>
            <div class="bg-white p-6 rounded shadow">
                <div class="flex justify-between mb-4"><h3 class="font-bold">列表</h3><input type="text" id="searchProj" placeholder="搜索..." class="border rounded px-3 py-1 text-sm"></div>
                <table class="w-full text-sm text-left">
                    <thead class="bg-gray-50 border-b">
                        <tr>
                            <th class="p-3 font-medium">课题名称</th>
                            <th class="p-3 font-medium">类型</th>
                            <th class="p-3 font-medium">状态</th>
                            <th class="p-3 font-medium text-right">操作</th>
                        </tr>
                    </thead>
                    <tbody id="projList"></tbody>
                </table>
            </div>
        </section>

        <!-- ================= 标准模块 ================= -->
        <section id="section-standard" class="hidden max-w-5xl mx-auto">
            <h2 class="text-2xl font-bold mb-6 border-l-4 border-purple-500 pl-4">标准管理</h2>
            <div class="bg-white p-6 rounded shadow mb-8 border-t-4 border-purple-500">
                <div class="flex justify-between mb-4"><h3 class="font-bold text-lg" id="stdFormTitle">新增标准</h3><span id="stdDraftTip" class="text-xs text-green-600 hidden">草稿已存</span></div>
                <form id="stdForm" class="grid grid-cols-2 gap-4">
                    <input type="hidden" id="stdId">
                    <input type="text" id="stdCode" placeholder="标准编号 (如 GB/T 12345-2023)" class="col-span-2 border p-2 rounded" required>
                    <input type="text" id="stdTitle" placeholder="标准名称" class="col-span-2 border p-2 rounded" required>
                    <select id="stdType" class="border p-2 rounded">
                        <option value="GB">国家标准</option>
                        <option value="QC">行业标准</option>
                        <option value="DB">地方标准</option>
                        <option value="T">团体标准</option>
                        <option value="other">其他</option>
                    </select>
                    <select id="stdStatus" class="border p-2 rounded">
                        <option value="active">现行</option>
                        <option value="draft">征求意见</option>
                        <option value="upcoming">即将实施</option>
                        <option value="expired">已废止</option>
                    </select>
                    
                    <div class="space-y-1">
                        <label class="block text-sm font-medium text-gray-700">发布日期</label>
                        <input type="date" id="stdPublishDate" class="w-full border p-2 rounded">
                    </div>
                    <div class="space-y-1">
                        <label class="block text-sm font-medium text-gray-700">实施日期</label>
                        <input type="date" id="stdImplementDate" class="w-full border p-2 rounded">
                    </div>
                    
                    <input type="text" id="stdDepartment" placeholder="主管部门" value="国家标准化管理委员会" class="col-span-2 border p-2 rounded">
                    <textarea id="stdDescription" placeholder="标准描述/适用范围" class="col-span-2 border p-2 rounded h-32"></textarea>
                    
                    <!-- 标准文件区域 -->
                    <div class="col-span-2 space-y-2">
                        <label class="block text-sm font-medium text-gray-700">标准文件 (PDF)</label>
                        
                        <!-- URL 输入 -->
                        <input type="text" id="stdPdfUrl" placeholder="PDF 文件链接 (https://...)" class="w-full border p-2 rounded text-sm bg-gray-50">
                        
                        <div class="flex flex-col sm:flex-row gap-3 items-center">
                            <input type="file" id="stdPdf" accept=".pdf" class="border p-2 rounded text-sm flex-1">
                            
                            <!-- 现有预览链接 -->
                            <a id="stdPdfPreviewLink" href="#" target="_blank" class="hidden text-purple-600 hover:text-purple-800 text-sm font-bold flex items-center">
                                <i class="fa-regular fa-eye mr-1"></i> 预览现有文件
                            </a>

                            <div class="flex items-center ml-auto">
                                <input type="checkbox" id="noPdfUpload" class="mr-2 h-4 w-4">
                                <label for="noPdfUpload" class="text-sm text-gray-600">不上传/无文件</label>
                            </div>
                        </div>
                        <p class="text-xs text-gray-400">逻辑：链接框 > 文件上传 > 不上传。</p>
                    </div>

                    <!-- 下载权限开关 -->
                    <div class="col-span-2 flex items-center bg-blue-50 p-3 rounded border border-blue-100 mt-2">
                        <input type="checkbox" id="stdAllowDownload" class="w-5 h-5 text-blue-600 rounded focus:ring-blue-500 border-gray-300" checked>
                        <div class="ml-3 text-sm">
                            <label for="stdAllowDownload" class="font-bold text-gray-700">开放下载权限</label>
                            <p class="text-gray-500 text-xs">取消勾选后，前台用户将无法下载该标准全文（按钮变灰），但不影响在线预览。</p>
                        </div>
                    </div>
                    
                    <div class="col-span-2 flex gap-4 mt-2">
                        <button type="submit" class="bg-purple-600 text-white px-6 py-2 rounded">提交标准</button>
                        <button type="button" onclick="cancelEdit('std')" id="stdCancelBtn" class="bg-gray-300 px-6 py-2 rounded hidden">撤销</button>
                    </div>
                </form>
            </div>
            <div class="bg-white p-6 rounded shadow">
                <div class="flex justify-between mb-4"><h3 class="font-bold">标准列表</h3><input type="text" id="searchStd" placeholder="搜索标准号或名称..." class="border rounded px-3 py-1 text-sm"></div>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left border-collapse">
                        <thead class="bg-gray-50">
                            <tr class="border-b">
                                <th class="p-3 font-medium">编号</th>
                                <th class="p-3 font-medium">名称</th>
                                <th class="p-3 font-medium">类型</th>
                                <th class="p-3 font-medium">状态</th>
                                <th class="p-3 font-medium">发布日期</th>
                                <th class="p-3 font-medium text-right">操作</th>
                            </tr>
                        </thead>
                        <tbody id="stdList"></tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script type="module" src="js/admin.js"></script>
    <script>
        window.switchTab = (tab) => {
            ['news', 'activity', 'project', 'standard'].forEach(t => {
                document.getElementById(`section-${t}`).classList.add('hidden');
                document.getElementById(`nav-${t}`).classList.remove('active-nav');
            });
            document.getElementById(`section-${tab}`).classList.remove('hidden');
            document.getElementById(`nav-${tab}`).classList.add('active-nav');
        };

        // 处理 PDF 上传框的 "不上传" 勾选逻辑
        document.addEventListener('DOMContentLoaded', function() {
            const pdfInput = document.getElementById('stdPdf');
            const noUploadCheckbox = document.getElementById('noPdfUpload');
            if (pdfInput && noUploadCheckbox) {
                noUploadCheckbox.addEventListener('change', function() {
                    pdfInput.disabled = this.checked;
                    if (this.checked) pdfInput.value = '';
                });
                pdfInput.addEventListener('change', function() {
                    if (this.files.length > 0) {
                        noUploadCheckbox.checked = false;
                        noUploadCheckbox.disabled = false;
                    }
                });
            }
        });

        // 本地图片选择后立即预览
        window.previewImage = function(input, imgId) {
            const boxId = imgId + 'Box';
            const img = document.getElementById(imgId);
            const box = document.getElementById(boxId);
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    img.src = e.target.result;
                    if(box) box.classList.remove('hidden');
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
</body>
</html>